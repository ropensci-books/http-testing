<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 16 Contributor friendliness | HTTP testing in R</title>
<meta name="author" content="Scott Chamberlain, MaÃ«lle Salmon">
<meta name="description" content="How do you make your package wrapping an HTTP resource contributor-friendly? rOpenSci has some general advice on contributor-friendliness. Now, there are some more aspects when dealing with HTTP...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 16 Contributor friendliness | HTTP testing in R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://books.ropensci.org/http-testing/contributor-friendliness.html">
<meta property="og:description" content="How do you make your package wrapping an HTTP resource contributor-friendly? rOpenSci has some general advice on contributor-friendliness. Now, there are some more aspects when dealing with HTTP...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 16 Contributor friendliness | HTTP testing in R">
<meta name="twitter:description" content="How do you make your package wrapping an HTTP resource contributor-friendly? rOpenSci has some general advice on contributor-friendliness. Now, there are some more aspects when dealing with HTTP...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.13/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><div class="inline-figure"><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></div></noscript>
<!-- End Matomo Code --><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">HTTP testing in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Preamble</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="http-in-r-101.html"><span class="header-section-number">2</span> HTTP in R 101</a></li>
<li><a class="" href="graceful.html"><span class="header-section-number">3</span> Graceful HTTP R packages</a></li>
<li><a class="" href="pkgs-testing-chapter.html"><span class="header-section-number">4</span> Packages for HTTP testing</a></li>
<li class="book-part">Whole Game(s)</li>
<li><a class="" href="introduction.html"><span class="header-section-number">5</span> Introduction</a></li>
<li><a class="" href="vcr.html"><span class="header-section-number">6</span> Use vcr (&amp; webmockr)</a></li>
<li><a class="" href="httptest.html"><span class="header-section-number">7</span> Use httptest</a></li>
<li><a class="" href="httptest2.html"><span class="header-section-number">8</span> Use httptest2</a></li>
<li><a class="" href="mocking-pkgs-comparison.html"><span class="header-section-number">9</span> vcr and httptest</a></li>
<li><a class="" href="webfakes.html"><span class="header-section-number">10</span> Use webfakes</a></li>
<li><a class="" href="pkgs-comparison.html"><span class="header-section-number">11</span> vcr (&amp; webmockr), httptest, webfakes</a></li>
<li class="book-part">Advanced Topics</li>
<li><a class="" href="real-requests-chapter.html"><span class="header-section-number">12</span> Making real requests</a></li>
<li><a class="" href="cran-preparedness.html"><span class="header-section-number">13</span> CRAN- (and Bioconductor) preparedness for your tests</a></li>
<li><a class="" href="security-chapter.html"><span class="header-section-number">14</span> Security</a></li>
<li><a class="" href="errors-chapter.html"><span class="header-section-number">15</span> Faking HTTP errors</a></li>
<li><a class="active" href="contributor-friendliness.html"><span class="header-section-number">16</span> Contributor friendliness</a></li>
<li class="book-part">Conclusion</li>
<li><a class="" href="conclusion-5.html"><span class="header-section-number">17</span> Conclusion</a></li>
<li class="book-part">webmockr details</li>
<li><a class="" href="mocking.html"><span class="header-section-number">18</span> Mocking HTTP Requests</a></li>
<li><a class="" href="webmockr-stubs.html"><span class="header-section-number">19</span> stubs</a></li>
<li><a class="" href="webmockr-testing.html"><span class="header-section-number">20</span> testing</a></li>
<li><a class="" href="webmockr-utilities.html"><span class="header-section-number">21</span> utilities</a></li>
<li class="book-part">vcr details</li>
<li><a class="" href="vcr-intro.html"><span class="header-section-number">22</span> Caching HTTP requests</a></li>
<li><a class="" href="vcr-usage.html"><span class="header-section-number">23</span> Advanced vcr usage</a></li>
<li><a class="" href="vcr-configuration.html"><span class="header-section-number">24</span> Configure vcr</a></li>
<li><a class="" href="record-modes.html"><span class="header-section-number">25</span> Record modes</a></li>
<li><a class="" href="request-matching.html"><span class="header-section-number">26</span> Request matching</a></li>
<li><a class="" href="debugging-your-tests-that-use-vcr.html"><span class="header-section-number">27</span> Debugging your tests that use vcr</a></li>
<li><a class="" href="vcr-security.html"><span class="header-section-number">28</span> Security with vcr</a></li>
<li><a class="" href="lightswitch.html"><span class="header-section-number">29</span> Turning vcr on and off</a></li>
<li><a class="" href="managing-cassettes.html"><span class="header-section-number">30</span> Managing cassettes</a></li>
<li><a class="" href="gotchas.html"><span class="header-section-number">31</span> Gotchas</a></li>
<li><a class="" href="session-info.html"><span class="header-section-number">32</span> Session info</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ropensci-books/http-testing">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="contributor-friendliness" class="section level1" number="16">
<h1>
<span class="header-section-number">16</span> Contributor friendliness<a class="anchor" aria-label="anchor" href="#contributor-friendliness"><i class="fas fa-link"></i></a>
</h1>
<p>How do you make your package wrapping an HTTP resource contributor-friendly?</p>
<p>rOpenSci has some general advice on <a href="https://devguide.ropensci.org/collaboration.html#friendlyfiles">contributor-friendliness</a>.</p>
<p>Now, there are some more aspects when dealing with HTTP testing.</p>
<div id="taking-notes-about-encryption" class="section level2" number="16.1">
<h2>
<span class="header-section-number">16.1</span> Taking notes about encryption<a class="anchor" aria-label="anchor" href="#taking-notes-about-encryption"><i class="fas fa-link"></i></a>
</h2>
<p>In your contributing guide, make sure you note how you e.g.Â created an encrypted token for the tests. Link to a script that one could run to re-create it. Good for future contributors including yourself!</p>
</div>
<div id="providing-a-sandbox" class="section level2" number="16.2">
<h2>
<span class="header-section-number">16.2</span> Providing a sandbox<a class="anchor" aria-label="anchor" href="#providing-a-sandbox"><i class="fas fa-link"></i></a>
</h2>
<p>It might be very neat to provide a <strong>sandbox</strong>, even if just for yourself.</p>
<ul>
<li>If interacting with say Twitter API you might want to create a Twitter account dedicated to this.</li>
</ul>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">And this is why you donâ€™t use live API credentials in your tests ðŸ¤£. Leaving up for the humorous replies <a href="https://t.co/x0COfvt2QD">https://t.co/x0COfvt2QD</a></p>â€” Hadley Wickham (@hadleywickham) <a href="https://twitter.com/hadleywickham/status/1365663264563204101?ref_src=twsrc%5Etfw">February 27, 2021</a>
</blockquote>
<ul>
<li><p>If interacting with some sort of web platform you might want to create an account special for storing test data.</p></li>
<li><p>Some web APIs provide a test API key, a test account that one can request access to.</p></li>
</ul>
<p>Make sure to take notes on how to create / request access to a sandbox, in your contributing guide.</p>
</div>
<div id="switching-between-accounts-depending-on-the-development-mode" class="section level2" number="16.3">
<h2>
<span class="header-section-number">16.3</span> Switching between accounts depending on the development mode<a class="anchor" aria-label="anchor" href="#switching-between-accounts-depending-on-the-development-mode"><i class="fas fa-link"></i></a>
</h2>
<p>Your package might have some behaviour to load a default token for instance, placed in an app dir.
Now, for testing, you might want it to load another token, and you probably also want the token choice to be as automatic as possible.</p>
<p>The <a href="https://github.com/ropensci/rtweet">rtweet package</a> has such logic.</p>
<ul>
<li>It <a href="https://github.com/ropensci/rtweet/blob/f46bc98f9ac8433c7681d48ed778358bc22a552c/R/utils.R#L132">detects testing/dev mode</a>.</li>
</ul>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">is_testing</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"TESTTHAT"</span><span class="op">)</span>, <span class="st">"true"</span><span class="op">)</span>  
<span class="op">}</span>
<span class="va">is_dev_mode</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/exists.html">exists</a></span><span class="op">(</span><span class="st">".__DEVTOOLS__"</span>, <span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html">.getNamespace</a></span><span class="op">(</span><span class="st">"rtweet"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<ul>
<li>If some environment variables are present it is able to <a href="https://github.com/ropensci/rtweet/blob/270733c6bf46b2be794d7492d4a4e31d384db0b7/R/auth.R#L281">create a testing token</a>.</li>
</ul>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rtweet_test</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">access_token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"RTWEET_ACCESS_TOKEN"</span><span class="op">)</span>
  <span class="va">access_secret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"RTWEET_ACCESS_SECRET"</span><span class="op">)</span>
  
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">access_token</span>, <span class="st">""</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">access_secret</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="op">)</span>
  <span class="op">}</span>

  <span class="fu">rtweet_bot</span><span class="op">(</span>
    <span class="st">"7rX1CfEYOjrtZenmBhjljPzO3"</span>,
    <span class="st">"rM3HOLDqmjWzr9UN4cvscchlkFprPNNg99zJJU5R8iYtpC0P0q"</span>,
    <span class="va">access_token</span>,
    <span class="va">access_secret</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<ul>
<li>The <a href="https://github.com/ropensci/rtweet/blob/270733c6bf46b2be794d7492d4a4e31d384db0b7/R/auth.R#L234">testing token or a default token is loaded depending on the development mode</a>.</li>
</ul>
</div>
<div id="documenting-http-testing" class="section level2" number="16.4">
<h2>
<span class="header-section-number">16.4</span> Documenting HTTP testing<a class="anchor" aria-label="anchor" href="#documenting-http-testing"><i class="fas fa-link"></i></a>
</h2>
<p>Contributors to the package might not be familiar with the HTTP testing package(s) you use (this is true of any non-trivial test setup). Make sure your contributing guide mentions pre-requisites and link to resources (maybe even this very book?).</p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="errors-chapter.html"><span class="header-section-number">15</span> Faking HTTP errors</a></div>
<div class="next"><a href="conclusion-5.html"><span class="header-section-number">17</span> Conclusion</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#contributor-friendliness"><span class="header-section-number">16</span> Contributor friendliness</a></li>
<li><a class="nav-link" href="#taking-notes-about-encryption"><span class="header-section-number">16.1</span> Taking notes about encryption</a></li>
<li><a class="nav-link" href="#providing-a-sandbox"><span class="header-section-number">16.2</span> Providing a sandbox</a></li>
<li><a class="nav-link" href="#switching-between-accounts-depending-on-the-development-mode"><span class="header-section-number">16.3</span> Switching between accounts depending on the development mode</a></li>
<li><a class="nav-link" href="#documenting-http-testing"><span class="header-section-number">16.4</span> Documenting HTTP testing</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ropensci-books/http-testing/blob/main/topics-contributing.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ropensci-books/http-testing/edit/main/topics-contributing.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>HTTP testing in R</strong>" was written by Scott Chamberlain, MaÃ«lle Salmon. It was last built on 2022-03-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
