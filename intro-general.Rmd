#  (PART) introduction {-}

# Introduction {#intro}


### HTTP requests in R: what package?

In R, to interact with web resources, it is recommended to use `{curl}`; or its higher-level interfaces `{httr}` ([pronounced _hitter_ or _h-t-t-r_](https://community.rstudio.com/t/pronunciations-of-common-r-terms/1810/15)) or `{crul}`.

Do not use RCurl that is not actively maintained.

When writing a package interacting with web resources, you will probably use either `{httr}` or `{crul}`.
httr is the most popular and oldest of the two, and supports OAuth among other things.
crul does not support OAuth but it uses an object-oriented interface, which you might like.

Below we will try to programmatically access the [status of GitHub](https://www.githubstatus.com/api/#status), the open-source platfrom provided by the company of the same name.
We will access the same information with httr and crul.
If you decide for the low-level curl, feel free to contribute an example.

```{r}
github_url <- "https://kctbh9vrtdwd.statuspage.io/api/v2/status.json"
```

The URL above leaves no doubt as to what format the data is provided in, JSON!

Let's first use httr.

```{r}
response <- httr::GET(github_url)

# Check the response status
httr::http_status(response)

# Or in a package you'd just write
httr::stop_for_status(response)

# Parse the content
httr::content(response)

# In case you wonder, the format was obtained from a header
httr::headers(response)$`content-type`
```

Now, the same with crul.

```{r}
# Create a client and get a response
client <- crul::HttpClient$new(github_url)
response <- client$get()


# Check the response status
response$status_http()

# Parse the content
response$parse()
jsonlite::fromJSON(response$parse())
```

Hopefully these very short snippets give you an idea of what syntax to expect when choosing one of those packages.

Note that the choice of a package will constraint the HTTP testing tools you can use (see next chapter).
However, the general ideas will remain the same.
You could switch your package backend from say crul to httr _without changing your tests_, if your tests do not test too many specifities of internals.