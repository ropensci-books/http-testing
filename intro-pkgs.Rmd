```{r echo = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  warning = FALSE,
  message = FALSE
)
```

# Packages for HTTP testing

A brief presentation of packages you'll "meet" again later in this book!

## webmockr

`{webmockr}` is an R package to help you "mock" HTTP requests. What does mock mean? Mock refers to the fact that we're faking the response. Here is how it works:

* You "stub" a request. That is, you set rules for what HTTP request you'd like to match on.
* You also can set rules for what you'd like to respond with, if anything (if nothing, then we give you `NULL`)
* Then you make HTTP requests, and those that match your stub will return what you requested be returned
* While `webmockr` is in use, real HTTP interactions are not allowed
* There is no recording interactions to disk at all, just mocked responses given as the user specifies in the R session

`webmockr` works with both the `crul` package and the `httr` package.

Read more about `webmockr` in [Section 2](#mocking).

## What is vcr? {#what-vcr}

The short version is: `vcr` helps you stub HTTP requests so you don't have to repeat HTTP requests.

The main use case is for unit tests of R packages.

`vcr` works with both the `crul` package and the `httr` package.

`vcr` works by hooking into `webmockr`. However, when `webmockr` finds a match, we then look for a recorded interaction on disk. If one is not found, we record the request and response. If one is found, we use that recorded interaction to construct a real response as the R client expects.

Read more about `vcr` in [Section 3](#vcr-intro).

## testthat 

`{testthat}` is not a package specifically for HTTP testing, it is a package for general purpose unit testing of R packages.
In this book we will assume that is what you use, because of its popularity.

Now, if you use an alternative like tinytest, 

* httptest won't work as it's specifically designed as a complement to testthat;

* vcr might work;

* presser might work.
